<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>System.IO.Net</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">stdio-0.1.0.0: Standard Input and Output for Haskell</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) Winterland 2018</td></tr><tr><th>License</th><td>BSD</td></tr><tr><th>Maintainer</th><td>drkoster@qq.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>non-portable</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">System.IO.Net</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module provides an API for creating TCP or IPC servers and clients. IPC Support is implemented with named pipes on Windows, and UNIX domain sockets on other operating systems.</p><p>On UNIX, the local domain is also known as the UNIX domain. The path is a filesystem path name. It gets truncated to sizeof(sockaddr_un.sun_path) - 1, which varies on different operating system between 91 and 107 bytes. The typical values are 107 on Linux and 103 on macOS. The path is subject to the same naming conventions and permissions checks as would be done on file creation. It will be visible in the filesystem, and will persist until unlinked.</p><p>On Windows, the local domain is implemented using a named pipe. The path must refer to an entry in \?pipe or \.pipe. Any characters are permitted, but the latter may do some processing of pipe names, such as resolving .. sequences. Despite appearances, the pipe name space is flat. Pipes will not persist, they are removed when the last reference to them is closed. Do not forget JavaScript string escaping requires paths to be specified with double-backslashes, such as:</p><p>net.createServer().listen(
  path.join('\\\\?\\pipe', process.cwd(), <code>myctl</code>));</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:initTCPConnection">initTCPConnection</a> :: <a href="GHC-Stack-Compat.html#t:HasCallStack">HasCallStack</a> =&gt; <a href="System-IO-Net-SockAddr.html#t:SockAddr">SockAddr</a> -&gt; <a href="file:///usr/local/Cellar/ghc/8.2.2/share/doc/ghc-8.2.2/html/libraries/base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="System-IO-Net-SockAddr.html#t:SockAddr">SockAddr</a> -&gt; <a href="System-IO-Exception.html#t:Resource">Resource</a> <a href="System-IO-UV-Stream.html#t:UVStream">UVStream</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:ServerConfig">ServerConfig</a> = <a href="file:///usr/local/Cellar/ghc/8.2.2/share/doc/ghc-8.2.2/html/libraries/base-4.10.1.0/Control-Exception-Base.html#t:Exception">Exception</a> e =&gt; <a href="#v:ServerConfig">ServerConfig</a> {<ul class="subs"><li><a href="#v:serverAddr">serverAddr</a> :: <a href="System-IO-Net-SockAddr.html#t:SockAddr">SockAddr</a></li><li><a href="#v:serverBackLog">serverBackLog</a> :: <a href="file:///usr/local/Cellar/ghc/8.2.2/share/doc/ghc-8.2.2/html/libraries/base-4.10.1.0/Data-Int.html#t:Int">Int</a></li><li><a href="#v:serverWorker">serverWorker</a> :: <a href="System-IO-UV-Stream.html#t:UVStream">UVStream</a> -&gt; <a href="file:///usr/local/Cellar/ghc/8.2.2/share/doc/ghc-8.2.2/html/libraries/base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li><li><a href="#v:serverWorkerNoDelay">serverWorkerNoDelay</a> :: <a href="file:///usr/local/Cellar/ghc/8.2.2/share/doc/ghc-8.2.2/html/libraries/base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:serverWorkerHandler">serverWorkerHandler</a> :: e -&gt; <a href="file:///usr/local/Cellar/ghc/8.2.2/share/doc/ghc-8.2.2/html/libraries/base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li></ul>}</li><li class="src short"><a href="#v:defaultServerConfig">defaultServerConfig</a> :: <a href="System-IO-Net.html#t:ServerConfig">ServerConfig</a></li><li class="src short"><a href="#v:startServer">startServer</a> :: <a href="System-IO-Net.html#t:ServerConfig">ServerConfig</a> -&gt; <a href="file:///usr/local/Cellar/ghc/8.2.2/share/doc/ghc-8.2.2/html/libraries/base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short">module <a href="System-IO-Net-SockAddr.html">System.IO.Net.SockAddr</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:initTCPConnection" class="def">initTCPConnection</a> :: <a href="GHC-Stack-Compat.html#t:HasCallStack">HasCallStack</a> =&gt; <a href="System-IO-Net-SockAddr.html#t:SockAddr">SockAddr</a> -&gt; <a href="file:///usr/local/Cellar/ghc/8.2.2/share/doc/ghc-8.2.2/html/libraries/base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="System-IO-Net-SockAddr.html#t:SockAddr">SockAddr</a> -&gt; <a href="System-IO-Exception.html#t:Resource">Resource</a> <a href="System-IO-UV-Stream.html#t:UVStream">UVStream</a> <a href="#v:initTCPConnection" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ServerConfig" class="def">ServerConfig</a> <a href="#t:ServerConfig" class="selflink">#</a></p><div class="doc"><p>A TCP/Pipe server configuration</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a href="file:///usr/local/Cellar/ghc/8.2.2/share/doc/ghc-8.2.2/html/libraries/base-4.10.1.0/Control-Exception-Base.html#t:Exception">Exception</a> e =&gt; <a id="v:ServerConfig" class="def">ServerConfig</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:serverAddr" class="def">serverAddr</a> :: <a href="System-IO-Net-SockAddr.html#t:SockAddr">SockAddr</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:serverBackLog" class="def">serverBackLog</a> :: <a href="file:///usr/local/Cellar/ghc/8.2.2/share/doc/ghc-8.2.2/html/libraries/base-4.10.1.0/Data-Int.html#t:Int">Int</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:serverWorker" class="def">serverWorker</a> :: <a href="System-IO-UV-Stream.html#t:UVStream">UVStream</a> -&gt; <a href="file:///usr/local/Cellar/ghc/8.2.2/share/doc/ghc-8.2.2/html/libraries/base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:serverWorkerNoDelay" class="def">serverWorkerNoDelay</a> :: <a href="file:///usr/local/Cellar/ghc/8.2.2/share/doc/ghc-8.2.2/html/libraries/base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:serverWorkerHandler" class="def">serverWorkerHandler</a> :: e -&gt; <a href="file:///usr/local/Cellar/ghc/8.2.2/share/doc/ghc-8.2.2/html/libraries/base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:defaultServerConfig" class="def">defaultServerConfig</a> :: <a href="System-IO-Net.html#t:ServerConfig">ServerConfig</a> <a href="#v:defaultServerConfig" class="selflink">#</a></p><div class="doc"><p>A default hello world server on localhost:8888</p><p>Test it with <code>main = startServer defaultServerConfig</code>, now try <code>nc -v 127.0.0.1 8888</code></p></div></div><div class="top"><p class="src"><a id="v:startServer" class="def">startServer</a> :: <a href="System-IO-Net.html#t:ServerConfig">ServerConfig</a> -&gt; <a href="file:///usr/local/Cellar/ghc/8.2.2/share/doc/ghc-8.2.2/html/libraries/base-4.10.1.0/System-IO.html#t:IO">IO</a> () <a href="#v:startServer" class="selflink">#</a></p><div class="doc"><p>Start a server</p><p>Fork new worker thread upon a new connection.</p></div></div><div class="top"><p class="src">module <a href="System-IO-Net-SockAddr.html">System.IO.Net.SockAddr</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.18.1</p></div></body></html>